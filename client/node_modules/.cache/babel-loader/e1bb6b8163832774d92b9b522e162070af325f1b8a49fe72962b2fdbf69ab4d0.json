{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\maxhi\\\\Desktop\\\\Projects\\\\Whitespace\\\\client\\\\src\\\\TextEditor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useCallback, useState, useRef, use } from 'react';\nimport Quill from \"quill\";\nimport \"quill/dist/quill.snow.css\";\nimport { io } from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TOOLBAR_OPTIONS = [[{\n  header: [1, 2, 3, 4, 5, 6, false]\n}], [{\n  font: []\n}], [{\n  list: \"ordered\"\n}, {\n  list: \"bullet\"\n}], [\"bold\", \"italic\", \"underline\"], [{\n  color: []\n}, {\n  background: []\n}], [{\n  script: \"sub\"\n}, {\n  script: \"super\"\n}], [{\n  align: []\n}], [\"image\", \"blockquote\", \"code-block\"], [\"clean\"]];\nconst SAVE_INTERVAL_MS = 500;\nconst PREDICTION_DEBOUNCE_MS = 500;\nconst MIN_CHARS_FOR_PREDICTION = 5;\nexport default function TextEditor() {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [quill, setQuill] = useState(null);\n  const {\n    id: documentId\n  } = useParams();\n  const [isPredicting, setIsPredicting] = useState(false);\n  const debounceTimerRef = useRef(null);\n  const suggestionRef = useRef(null);\n  useEffect(() => {\n    const s = io(\"http://localhost:3001\");\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    const interval = setInterval(() => {\n      socket.emit(\"save-document\", quill.getContents());\n    }, SAVE_INTERVAL_MS);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [socket, quill]);\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    socket.once(\"load-document\", document => {\n      quill.setContents(document);\n      quill.enable();\n    });\n    socket.emit(\"get-document\", documentId);\n  }, [quill, socket, documentId]);\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    const handler = delta => {\n      quill.updateContents(delta);\n    };\n    socket.on(\"receive-changes\", handler);\n    return () => {\n      socket.off(\"receive-changes\", handler);\n    };\n  }, [socket, quill]);\n  const fetchPrediction = async text => {\n    try {\n      setIsPredicting(true);\n      const response = await fetch(\"/api/predict\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          text\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Network response was not ok\");\n      }\n      const data = await response.json();\n      return data.prediction;\n    } catch (error) {\n      console.error(\"Error fetching prediction:\", error);\n      return \"\";\n    } finally {\n      setIsPredicting(false);\n    }\n  };\n  const handleTextChange = useCallback(async (delta, oldDelta, source) => {\n    if (source !== \"user\" || !quill || isPredicting) return;\n    const selection = quill.getSelection();\n    if (!selection) return;\n    if (debounceTimerRef.current) {\n      clearTimeout(debounceTimerRef.current);\n    }\n    const cursorPosition = selection.index;\n    const fullText = quill.getText(0, cursorPosition);\n    if (fullText.length < MIN_CHARS_FOR_PREDICTION) return;\n    if (suggestionRef.current) {\n      quill.deleteText(suggestionRef.current.start, suggestionRef.current.length);\n      suggestionRef.current = null;\n    }\n    debounceTimerRef.current = setTimeout(async () => {\n      const prediction = await fetchPrediction(fullText);\n      if (prediction && prediction.length > 0 && quill.hasFocus()) {\n        const currentSelection = quill.getSelection();\n        if (!currentSelection) return;\n        const currentPosition = currentSelection.index;\n        quill.insertText(currentPosition, prediction, {\n          color: '#aaaaaa',\n          'user-suggestion': true\n        });\n        suggestionRef.current = {\n          start: currentPosition,\n          length: prediction.length\n        };\n        quill.setSelection(currentPosition + prediction.length, 0);\n      }\n    }, PREDICTION_DEBOUNCE_MS);\n  }, [quill, isPredicting]);\n  const handleKeyDown = useCallback(event => {\n    if (!quill || !suggestionRef.current) return;\n    if (event.key === 'Tab' && suggestionRef.current) {\n      event.preventDefault();\n\n      // Get the current suggestion\n      const {\n        start,\n        length\n      } = suggestionRef.current;\n\n      // Accept the suggestion by changing its format to regular text\n      quill.formatText(start, length, {\n        color: 'black',\n        'user-suggestion': false\n      });\n\n      // Move cursor to the end of the accepted suggestion\n      quill.setSelection(start + length, 0);\n\n      // Clear the suggestion reference\n      suggestionRef.current = null;\n    } else if (event.key === 'Escape' && suggestionRef.current) {\n      event.preventDefault();\n\n      // Remove the suggestion\n      const {\n        start,\n        length\n      } = suggestionRef.current;\n      quill.deleteText(start, length);\n      suggestionRef.current = null;\n    }\n  }, [quill]);\n  useEffect(() => {\n    if (socket == null || quill == null) return;\n    const handler = (delta, oldDelta, source) => {\n      if (source !== \"user\") return;\n      socket.emit(\"send-changes\", delta);\n    };\n    quill.on(\"text-change\", handler);\n    quill.on(\"text-change\", handleTextChange);\n    if (quill.root) {\n      quill.root.addEventListener(\"keydown\", handleKeyDown);\n    }\n    return () => {\n      quill.off(\"text-change\", handler);\n      quill.off(\"text-change\", handleTextChange);\n      if (quill.root) {\n        quill.root.removeEventListener(\"keydown\", handleKeyDown);\n      }\n    };\n  }, [socket, quill, handleTextChange, handleKeyDown]);\n  const wrapperRef = useCallback(wrapper => {\n    if (wrapper === null) return;\n    wrapper.innerHTML = \"\";\n    const editor = document.createElement(\"div\");\n    wrapper.append(editor);\n    const q = new Quill(editor, {\n      theme: \"snow\",\n      modules: {\n        toolbar: TOOLBAR_OPTIONS\n      }\n    });\n    q.disable();\n    q.setText(\"\");\n    setQuill(q);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-container\",\n      ref: wrapperRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), isPredicting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"prediction-indicator\",\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \"Thinking...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor-hint\",\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \"Press Tab to accept suggestions or Esc to reject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 9\n  }, this);\n}\n_s(TextEditor, \"MU/qlwge1QYllEdAKoXPhZgLxWc=\", false, function () {\n  return [useParams];\n});\n_c = TextEditor;\nvar _c;\n$RefreshReg$(_c, \"TextEditor\");","map":{"version":3,"names":["React","useEffect","useCallback","useState","useRef","use","Quill","io","useParams","jsxDEV","_jsxDEV","TOOLBAR_OPTIONS","header","font","list","color","background","script","align","SAVE_INTERVAL_MS","PREDICTION_DEBOUNCE_MS","MIN_CHARS_FOR_PREDICTION","TextEditor","_s","socket","setSocket","quill","setQuill","id","documentId","isPredicting","setIsPredicting","debounceTimerRef","suggestionRef","s","disconnect","interval","setInterval","emit","getContents","clearInterval","once","document","setContents","enable","handler","delta","updateContents","on","off","fetchPrediction","text","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","prediction","error","console","handleTextChange","oldDelta","source","selection","getSelection","current","clearTimeout","cursorPosition","index","fullText","getText","length","deleteText","start","setTimeout","hasFocus","currentSelection","currentPosition","insertText","setSelection","handleKeyDown","event","key","preventDefault","formatText","root","addEventListener","removeEventListener","wrapperRef","wrapper","innerHTML","editor","createElement","append","q","theme","modules","toolbar","disable","setText","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/maxhi/Desktop/Projects/Whitespace/client/src/TextEditor.js"],"sourcesContent":["import React, { useEffect, useCallback, useState, useRef, use } from 'react'\r\nimport Quill from \"quill\"\r\nimport \"quill/dist/quill.snow.css\"\r\nimport { io } from \"socket.io-client\"\r\nimport { useParams } from \"react-router-dom\"\r\n\r\nconst TOOLBAR_OPTIONS = [\r\n    [{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n    [{ font: [] }],\r\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n    [\"bold\", \"italic\", \"underline\"],\r\n    [{ color: [] }, { background: [] }],\r\n    [{ script: \"sub\" }, { script: \"super\" }],\r\n    [{ align: [] }],\r\n    [\"image\", \"blockquote\", \"code-block\"],\r\n    [\"clean\"],\r\n]\r\nconst SAVE_INTERVAL_MS = 500\r\nconst PREDICTION_DEBOUNCE_MS = 500\r\nconst MIN_CHARS_FOR_PREDICTION = 5\r\n\r\nexport default function TextEditor() {\r\n    const [socket, setSocket] = useState(null)\r\n    const [quill, setQuill] = useState(null)\r\n    const { id: documentId } = useParams()\r\n    const [isPredicting, setIsPredicting] = useState(false)\r\n    const debounceTimerRef = useRef(null)\r\n    const suggestionRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        const s = io(\"http://localhost:3001\")\r\n        setSocket(s)\r\n\r\n        return () => {\r\n            s.disconnect()\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (socket == null || quill == null) return\r\n\r\n        const interval = setInterval(() => {\r\n            socket.emit(\"save-document\", quill.getContents())\r\n        }, SAVE_INTERVAL_MS)\r\n\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    }, [socket, quill])\r\n\r\n    useEffect(() => {\r\n        if (socket == null || quill == null) return\r\n\r\n        socket.once(\"load-document\", (document) => {\r\n            quill.setContents(document)\r\n            quill.enable()\r\n        })\r\n\r\n        socket.emit(\"get-document\", documentId)\r\n    }, [quill, socket, documentId])\r\n\r\n    useEffect(() => {\r\n        if (socket == null || quill == null) return\r\n        \r\n        const handler = (delta) => {\r\n            quill.updateContents(delta)\r\n        }\r\n        socket.on(\"receive-changes\", handler)\r\n\r\n        return () => {\r\n            socket.off(\"receive-changes\", handler)\r\n        }\r\n    }, [socket, quill])\r\n\r\n    const fetchPrediction = async (text) => {\r\n        try {\r\n            setIsPredicting(true)\r\n            const response = await fetch(\"/api/predict\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ text }),\r\n            });\r\n            if (!response.ok) {\r\n                throw new Error(\"Network response was not ok\")\r\n            }\r\n            const data = await response.json()\r\n            return data.prediction\r\n        } catch (error) {\r\n            console.error(\"Error fetching prediction:\", error)\r\n            return \"\"\r\n        } finally {\r\n            setIsPredicting(false)\r\n        }\r\n    };\r\n\r\n    const handleTextChange = useCallback(async (delta, oldDelta, source) => {\r\n        if (source !== \"user\" || !quill || isPredicting) return\r\n\r\n        const selection = quill.getSelection();\r\n        if (!selection) return\r\n\r\n        if (debounceTimerRef.current) {\r\n            clearTimeout(debounceTimerRef.current)\r\n        }\r\n\r\n        const cursorPosition = selection.index\r\n        const fullText = quill.getText(0, cursorPosition)\r\n\r\n        if (fullText.length < MIN_CHARS_FOR_PREDICTION) return\r\n\r\n        if (suggestionRef.current) {\r\n            quill.deleteText(\r\n                suggestionRef.current.start,\r\n                suggestionRef.current.length,\r\n            )\r\n            suggestionRef.current = null\r\n        }\r\n\r\n        debounceTimerRef.current = setTimeout(async () => {\r\n            const prediction = await fetchPrediction(fullText)\r\n            if (prediction && prediction.length > 0 && quill.hasFocus()) {\r\n                const currentSelection = quill.getSelection();\r\n                if (!currentSelection) return;\r\n                \r\n                const currentPosition = currentSelection.index;\r\n                \r\n                quill.insertText(\r\n                    currentPosition, \r\n                    prediction,\r\n                    { color: '#aaaaaa', 'user-suggestion': true }\r\n                );\r\n                \r\n                suggestionRef.current = {\r\n                    start: currentPosition,\r\n                    length: prediction.length\r\n                };\r\n\r\n                quill.setSelection(currentPosition + prediction.length, 0);\r\n            }\r\n        }, PREDICTION_DEBOUNCE_MS);\r\n    }, [quill, isPredicting])\r\n\r\n    const handleKeyDown = useCallback((event) => {\r\n        if (!quill || !suggestionRef.current) return\r\n        if (event.key === 'Tab' && suggestionRef.current) {\r\n            event.preventDefault();\r\n            \r\n            // Get the current suggestion\r\n            const { start, length } = suggestionRef.current;\r\n            \r\n            // Accept the suggestion by changing its format to regular text\r\n            quill.formatText(start, length, { color: 'black', 'user-suggestion': false });\r\n            \r\n            // Move cursor to the end of the accepted suggestion\r\n            quill.setSelection(start + length, 0);\r\n            \r\n            // Clear the suggestion reference\r\n            suggestionRef.current = null;\r\n        } else if (event.key === 'Escape' && suggestionRef.current) {\r\n            event.preventDefault();\r\n            \r\n            // Remove the suggestion\r\n            const { start, length } = suggestionRef.current;\r\n            quill.deleteText(start, length);\r\n            suggestionRef.current = null;\r\n        }\r\n    }, [quill]);\r\n\r\n    useEffect(() => {\r\n        if (socket == null || quill == null) return\r\n\r\n        const handler = (delta, oldDelta, source) => {\r\n            if (source !== \"user\") return\r\n            socket.emit(\"send-changes\", delta)\r\n        }\r\n        quill.on(\"text-change\", handler)\r\n        quill.on(\"text-change\", handleTextChange)\r\n\r\n        if (quill.root) {\r\n            quill.root.addEventListener(\"keydown\", handleKeyDown)\r\n        }\r\n\r\n        return () => {\r\n            quill.off(\"text-change\", handler)\r\n            quill.off(\"text-change\", handleTextChange)\r\n            if (quill.root) {\r\n                quill.root.removeEventListener(\"keydown\", handleKeyDown)\r\n            }\r\n        }\r\n    }, [socket, quill, handleTextChange, handleKeyDown])\r\n\r\n        \r\n    const wrapperRef = useCallback((wrapper) => {\r\n        if (wrapper === null) return\r\n\r\n        wrapper.innerHTML = \"\"\r\n        const editor = document.createElement(\"div\")\r\n        wrapper.append(editor)\r\n        const q = new Quill(editor, {\r\n            theme: \"snow\",\r\n            modules: { toolbar: TOOLBAR_OPTIONS } })\r\n\r\n        q.disable()\r\n        q.setText(\"\")\r\n\r\n        setQuill(q)\r\n\r\n    }, [])\r\n  return (\r\n        <div className=\"container\">\r\n            <div className=\"editor-container\" ref={wrapperRef}></div>\r\n            {isPredicting && (\r\n                <div className=\"prediction-indicator\">\r\n                    <small>Thinking...</small>\r\n                </div>\r\n            )}\r\n            <div className=\"editor-hint\">\r\n                <small>Press Tab to accept suggestions or Esc to reject</small>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}